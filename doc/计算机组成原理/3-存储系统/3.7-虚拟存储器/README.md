3.7 虚拟存储器

## 习题

- 4【2010】下列命令组合的一次访存过程中，不可能发生的是
  A TLB 未命中，Cache 未命中，Page 未命中
  B TLB 未命中，Cache 命中，Page 命中
  C TLB 命中，Cache 未命中，Page 命中
  D TLB 命中，Cache 命中，Page 未命中 →D
- 5 【2013】某计算机主存地址空间大小为 256MB，按字节编址。虚拟地址空间大小为 4GB，采用页式存储管理，页面大小为 4KB，TLB（快表）采用全相联映射，有 4 个页表项，内容如下表所示
  有效位 标记 页框号
  0 FF180H 0002H
  1 3FFF1H 0035H
  0 02FF3H 0351H
  1 03FFFH 0153H
  则对虚拟地址 03FF F180H 进行虚实地址变换的结果是 →0153180H
- 11【2015】假定编译器将赋值语句「x=x+3」转换为指令「add xaddr, 3」，其中 xaddr 是 x 对应的存储单元地址。若执行该指令的计算机采用页式虚拟存储管理方式，并配有相应的 TLB，且 Cache 使用直写方式，则完成该指令功能需要访问主存的次数至少是 →1 次，直写需要同时把数据写入 Cache 和主存，所以是 1 次
- 12【2015】假定主存地址为 32 位，按字节编址，主存和 Cache 之间采用直接映射方式，主存块大小为 4 个字，每字 32 位，采用回写方式，则能存放 4K 字数据的 Cache 的总容量的位数至少是 →148K
- 13【2019】下列关于缺页处理的叙述中，错误的是
  A 缺页是在地址转换时 CPU 检测到的一种异常
  B 缺页处理是由操作系统提供的缺页处理程序完成
  C 缺页处理程序根据页故障地址从外存读入所缺失的页
  D 缺页处理完成后回到发生缺页的指令的下一条指令执行 →D
- 14【2020】下列关于 TLB 和 Cache 的叙述中，错误的是
  A 命中率都与程序局部性有关
  B 缺失后都需要去访问主存
  C 缺失处理都可以由硬件实现
  D 都由 DRAM 存储器组成 →D，Cache 由 SRAM 组成；TLB 通常由相联存储器组成，也可由 SRAM 组成
- 综合题 1【2011】某计算机存储器按字节编址，虚拟（逻辑）地址空间大小为 16MB，主存（物理）地址空间大小为 1MB，页面大小为 4KB；Cache 采用直接映射方式，共 8 行；主存与 Cache 之间交换的块大小为 32B。系统运行到某一个时刻时，页表的部分内容和 Cache 的部分内容分别如下的左图和右图所示，图中页框号及标记字段的内容为十六进制形式
- 综合题 5【2018】某计算机采用页式虚拟存储管理方式，按字节编址。CPU 进行存储访问的过程如下图所示
  A. 主存物理地址占多少位
  B. TLB 采用什么映射方式？TLB 是用 SRAM 还是用 DRAM 实现
  C. Cache 采用什么映射方式？若 Cache 采用 LRU 替换算法和回写策略，则 Cache 每行除数据（Data）、Tag 和有效位外，还应有哪些附加位？Cache 总容量是多少？Cache 总容量是多少？Cache 中有效位的作用是什么？
  D. 若 CPU 给出的虚拟地址为 0008 C040H，则对应的物理地址是多少？是否在 Cache 中命中？说明理由。若 CPU 给出的虚拟地址为 0007 C260H，则该地址所在的主存块映射到 Cache 组号是多少？
