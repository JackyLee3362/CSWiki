## 3.7广域网 WAN
### 基本概念
- PPP协议和HDLC协议是目前最常用的两种广域网数据链路层控制协议
### PPP协议 Point to Point Protocol
- 使用串行线路通信的面向字节的协议
- 组成部分
    - 链路控制协议 LCP
    - 网络控制协议 NCP
    - 一个将IP数据报封装到串行链路的方法：这个信息部分的长度收到MTU的限制
- 帧格式
- 因为PPP是点对点的，并不是总线形，所以无须采用CSMA/CD协议，自然就没有最短帧，所以信息段占0~1500字节，而不是46~1500字节
- 注意
    - PPP提供差错检测但不提供纠错，是不可靠传输协议，因此也不使用序号和确认机制
    - 仅支持点对点的链路通信，不支持多点线路
    - PPP只支持全双工链路
    - PPP的两端可以运行不同的网络层协议，但仍然可以用同一个PPP进行通信
    - PPP是^^面向字节^^，字节填充法（异步线路），用硬件完成比特填充（同步线路）
- 三个组成部分
    - 链路控制协议 LCP Link Control Protocol
    - 网络控制协议 NCP Network Control Protocol
    - 一个将IP数据报封装到串行数据链路的方法：MTU
### HDLC协议 | High-level Data Link Control | 高级数据链路控制协议
- 协议是 ISO制定的面向比特的（PPP是面向字节的）的数据链路层协议
- 面向比特——使用零比特填充法
- 全双工通信，有较高的数据传输效率
- 传输控制功能与处理功能分离，具有较大灵活性
- 适用于链路的两种基本配置
    - 非平衡配置
    - 平衡配置
- 站
    - 主站：负责控制链路的操作，主站发处的帧称为命令帧
    - 从站：受控于主站，按主站的命令进行操作，发出的帧为响应帧
    - 复合站：可以发出命令帧和响应帧
- 数据操作方式
    - 正常响应方式
    - 异步平衡方式
    - 异步响应方式
- 帧格式
    - 标志 F 0111 1110
    - 地址 A 8位
    - 控制 C 8位
        - 信息帧 I 第1位为0，用来传输数据信息，捎带技术对数据进行确认
        - 监督帧 S 第1，2位为10，用于流量控制和差错控制，执行对信息帧的确认、请求重发和请求暂停发送等功能
        - 无编号帧 U 第1，2位为1，用于提供对链路的建立、拆除等多种控制功能
    - 信息
    - FCS 帧检验序列 Frame Check Sequence
- 交换模式
    - 直通式
    - 存储转发式
### 与PPP的区别  知识点
- PPP面向字节，HDLC面向比特
- PPP帧比HDLC帧都一个2字节的协议字段，当协议字段为0x0021时，表示信息字段是IP数据报
- PPP协议不使用序号和确认机制，只保证无差错接收（通过硬件进行CRC检验），而端到端差错检测由高层协议负责。HDLC协议的信息帧使用了编号和确认机制，能够提供可靠传输

### 习题

- 4 下列协议中不属于TCP/IP协议族的是（ICMP / TCP /FTP/ HDLC）→?  HDLC
- 6 以下对于PPP的说法中，正确的是
A 具有差错控制能力 
B PPP仅支持IP协议
C PPP支持动态分配IP地址
D PPP仅支持身份验证→ACD

A 具有差错检测能力，但是不具有纠错能力
B PPP两端的网络层可以运行不同的网络层协议
C PPP可用于拨号连接，因此支持动态分配IP地址
D 支持两种认证，一种是PAP，另一种是CHAP

- 14【2013】HDLC协议对 0111 1100 0111 1110组帧后，对应的比特串是
0111 11**0**0 0011 111**0** 10
