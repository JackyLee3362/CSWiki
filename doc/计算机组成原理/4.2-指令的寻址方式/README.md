## 4.2指令的寻址方式
### ~边界对齐存储
    - 机器字长：CPU一次能处理的二进制数据的位数
    - 指令字长：一个指令字中包含二进制代码的位数
    - 存储字长：一个存储单元存储二进制代码的长度
    - 单字长指令：指令长度=机器字长（和半字长指令、双字长指令区分）
    - （这些长度都是字节的整数倍）
- 指令寻址和数据寻址
    - 数据寻址
        - 隐含寻址 ` 程序指定 `
        - 直接寻址 ` EA = A `
        - 间接寻址 ` EA = (A) `
        - 寄存器寻址 ` EA = Ri `
        - 寄存器间接寻址 ` EA = (Ri) `
        - 相对寻址 ` EA = (PC) + A `  把程序计数器（PC）的内容加上指令格式中的形式地址A而形成操作数的有效地址，A可正可负，用补码表示，多用于转移指令
        - 基址寻址 ` EA = (BR) + A `   多用于多道指令，面向操作系统，其内容由操作系统或管理程序确定
        - 变址寻址 ` EA = (IX) + A `  多用于循环程序，面向用户
        - 堆栈寻址
            - 硬堆栈（用寄存器实现）
            - 软堆栈（用主存中的一段区域实现）
### X86汇编指令入门
#### ~寄存器 Register
  - 概念
      - 寄存器是位于CPU或GPU内部的少量的高速存储器，用于保存机器指令的操作数
  - 子类
      - 指令寄存器 IR
      - 程序计数器 PC
      - 程序状态字寄存器 PSWR
          - PSWR
                  1. Flag Register
                  2. 标志寄存器
                  3. Program Status Word Register
                  4. 程序状态字寄存器
                  5. 程序状态寄存器
              - 程序状态字 PSW：是指在电脑中，一段包含被 操作系统和潜在 硬件使用的程序状态信息的 内存或 硬件 区域
                  - 进位标志位（CF）
                  - 结果为零标志位（ZF）
                  - 符号标志位（SF）
                  - 溢出标志位（OF）
                  - 陷阱标志位（TF）
                  - 中断使能（中断屏蔽）标志位（IF）
                  - 虚拟中断标志位（VIF）
                  - 虚拟中断待决标志位（VIP）
                  - I0特权级别（IOPL）
      - 通用寄存器GR
      - 累加寄存器 ACC
      - 基地址寄存器
      - 计数寄存器
- 相关寄存器
- 寻址模式和内存分配
- 常用指令
  - 数据传送指令
      - mov指令
      - push指令
      - pop指令
  - 算术和逻辑运算指令
      - add/sub指令
      - inc/dec指令
      - imul指令
      - idiv指令
      - and/or/xor指令
      - not指令
      - neg指令
      - shl/shr指令
  - 控制流指令
      - jmp指令
      - jcondition指令
      - cmp指令
      - call/ret指令
### 习题
    - 3 直接寻址的无条件转移指令的功能是将指令中的地址码送入→程序计数器（PC）
    - 4 为了缩短指令中某个地址段的位数，有效的方法是采取→寄存器寻址
    - 5 简化地址结构的基本方法是尽量采用→隐地址
    - 12 【2017】相对寻址、寄存器寻址、直接寻址、变址寻址，最适合按下标顺序访问一组数组元素的是→变址寻址
    - 13 在多道程序设计中，最重要的寻址方式是→相对寻址
    - 15 【2009】
    - 16 【2011】某机器有一个标志寄存器，其中有进位/借位标志 CF、零标志ZF、符号标志SF和溢出标志OF，条件转移指令bgt（无符号整数比较大于时转移）的转移条件是→$\overline{CF+ZF}=1$
    - 17 【2014】某计算机有16个通用寄存器，采用32位定长指令字，操作码字段（含寻址方式位）为8位，Store指令的源操作数和目的操作数分别采用寄存器直接寻址和基址寻址方式。若基址寄存器可使用任一通用寄存器，且偏移量用补码表示，则Store指令中偏移量的取值范围是→-32768~32767
    - 24 设相对寻址的转移指令占3B，第一字节为操作码，第二、第三字节为相对位移量（补码表示），而且数据在存储器中采用低字节为字地址的存放方式。每当CPU从存储器取出一字节时，即自动完成`(PC)+1->PC`
①若PC的当前值为240（十进制），要求转移到290（十进制），则转移指令的第二、三字节的机器代码是
②若PC的当前值为240（十进制），要求转移到200（十进制），则转移指令的第二、三字节的机器代码是？答案→① 2FH、00H
② D5H、FFH
补码扩充：用符号位补足即可，正数的补码扩充只要补0，负数的补码扩充只要补1
①中290-(240+3)=47=2FH，补0即可→2FH，00H
②中200-(240+3)=-47=D5H，补1即可→D5H，FFH
    - 27【2019】某计算机采用大端方式，按字节编址。某指令中操作数的机器数为1234 FF00H，该操作数采用基址寻址方式，形式地址（用补码表示）为FF12H，基址寄存器的内容为F000 0000H，则该操作数的LSB（最低有效字节）所在的地址是?→EFFF FF15H
F000 0000H + ( -00EEH) = EFFF FF15H
    - 28【2020】某计算机采用16位定长指令字格式，操作码位数和寻址方式位数固定，指令系统有48条指令，支持直接、间接、立即、相对4种寻址方式。在单地址指令中，直接寻址方式的可寻址范围是→0~255
    - 综合题5【2010】R4的内容是1324H，R5的内容是5678H，地址1234H的内容是5678H，5678H的内容是1324H，则汇编语句「add (R4), (R5)+」，（逗号前为源操作数，逗号后为目的操作数），该指令执行后，哪些寄存器和存储单元的内容回改变？改变后的内容是什么?→寄存器R5和内存单元5678H的内容会改变，R5中改为5679H，内存中5678H改为68ACH
    - 综合题7【2013】
    - 综合题8【2015】
    - 综合题9【2017】
    - 综合题10【2019】重要→书177，顺便下一题也做了
    - 综合题11【2019】
