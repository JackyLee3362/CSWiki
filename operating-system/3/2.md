## 3.2 虚拟内存管理
### 虚拟内存的基本概念
- 传统存储管理方式的特征
    - 一次性
    - 驻留性
- 局部性原理
    - 时间局部性
    - 空间局部性
- 虚拟存储器的定义和特征
    - 定义
    - 特征
        - 多次性
        - 对换性
        - 虚拟性
- 虚拟内存技术的实现：建立在离散分配的内存管理方式的基础上
    - 三种方式
        - 请求分页存储管理
        - 请求分段存储管理
        - 请求段页式存储管理
- 虚拟内存的容量要满足两个条件
    - 虚存的实际容量 ≤ 内存容量和外存容量之和
    - 虚存的最大容量 ≤ 计算机的地址位数能容纳的最大容量
### 请求分页管理方式
- 页表机制
    - 字段
        - 状态位P
        - 访问字段A
        - 修改位M
        - 外存地址
- 缺页中断机构
    - 在指令执行期间而非一条指令执行完后产生和处理中断信号，属于内部中断
    - 一条指令在执行期间，可能产生多次缺页中断
- 地址变换机构
### 页面置换算法
- 最佳（OPT）置换算法―最长时间内不再被访问的页面
- 先进先出（FIFO）算法
    - Belady异常
- 最近最久未使用（LRU，Least recently used）算法
- 时钟（CLOCK）置换算法 或 最近未使用（Not Recently Used，NRU）算法
    - 改进型CLOCK置换算法
### 页面分配策略
- 驻留集大小
    - 固定分配局部置换
    - 可变分配全局置换
    - 可变分配局部置换
- 调入页面的时机
    - 预调页策略（运行前调入）
    - 请求调页策略
- 从何处调入页面
    - 外存分为两部分
        - 用于存放文件的文件区：通常采用离散分配方式
        - 用于存放对换页面的对换区：通常采用连续分配方式
    - 三种情况
        - 系统拥有足够的对换区空间
        - 系统缺少足够的对换区空间
        - UNIX方式
### 抖动（颠簸）
- 发生的原因：某个进程频繁访问的页面数目高于可用的物理页帧数目
### 工作集
### 习题  
- 1【2012】下列关于虚拟存储器的叙述中，正确的是
A 虚拟存储只能基于连续分配技术
B 虚拟存储只能基于非连续分配技术
C 虚拟存储容量只受外存容量的限制
D 虚拟存储容量只受内存容量的限制→B
- 4【2011】
- 5【2013】
- 16 导致LRU算法实现起来耗费高的原因是
A 需要硬件的特殊支持
B 需要特殊的中断处理程序
C 需要在页表中标明特殊的页类型
D 需要对所有的页进行排序→D
- 11
- 16
- 17
- 20
- 21
- 25
- 29 已知系统为32位实地址，采用48位虚地址，页面大小为4KB，页表项大小为8B，假设系统使用纯页式存储，则要采用几级页表？页内偏移是多少位？→4级页表，12位页内偏移
- 30
- 33【2011】
- 34【2014】
- 35【2014】在页式虚拟存储管理系统中，采用某些页面置换算法会出现Belady异常现象，即进程的缺页次数会随着分配给该进程的页框个数的增加而增加，下列算法中会出现Belady异常现象的是
① LRU算法 ② FIFO算法 ③ OPT算法→②FIFO算法
- 36【2016】
- 37【2015】在请求分页系统中，页面分配策略与页面置换策略不能组合使用的是
A 可变分配，全局置换
B 可变分配，局部置换
C 固定分配，全局置换
D 固定分配，局部置换→C
- 38【2015】
- 39【2016】
- 40【2019】
- 41【2020】下列因素中，影响请求分页系统有效（平均）访存时间的是
① 缺页率
② 磁盘读写时间
③ 内存访问时间
④ 执行缺页处理程序的CPU时间→①②③④
- 5【2009】
- 13【2012】
- 16【2010】
- 17【2017】
- 19【2015】
- 20【2018】
- 21【2020】
- 
