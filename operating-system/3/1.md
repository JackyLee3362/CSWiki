## 3.1 内存管理概念
- 内存管理的功能
    - 内存空间的分配与回收
    - 地址转换
    - 内存空间的扩充
    - 存储保护
## 3.1.1内存管理的基本原理和要求
- 程序装入和链接
    - 步骤
        - 编译
        - 链接
        - 装入
    - 程序的链接方式
        - 静态链接
        - 装入时动态链接
        - 运行时动态链接
    - 内存的装入
        - 绝对装入
        - 可重定位装入
        - 动态运行时装入 或 动态重定位
- 逻辑地址空间与物理地址空间
    - 相对地址（逻辑地址）
    - 地址重定位
- 内存保护
    - 设置一对上、下限寄存器
## *3.1.2 覆盖与交换（不要求）
## 3.1.3连续分配管理方式
- 单一连续分配
    - 有内部碎片
- 固定分区分配
    - 分区大小相等
    - 分区大小不等
    - 存在两个问题
        - 程序过大放不进任何一个分区中
        - 主存利用率低，称为内部碎片
- 动态分区分配（可变区分配）
    - 外部碎片
    - 紧凑（compaction）技术来解决外部碎片问题
    - 首次适应算法 First Fit
    - 最佳适应算法 Best Fit
    - 最坏适应算法 Worst Fit
    - 邻近适应算法 Next Fit
## 3.1.4非连续分配管理方式
### 基本分页存储管理方式
- 分页存储的几个基本概念
    - 页面和页面大小
        - 进程中的块称为页（Page）
        - 内存中的块称为页框（Page Frame，或页帧）
        - 外存直接称为块（Block）
    - 地址结构
    - 页表
        - 实现从页号到物理块号的地址映射
- 基本地址变换机构
    - 页表寄存器（PTR）
    - 过程
        - 设页面大小为L，逻辑地址为A，物理地址为E
        - 页号P = L/A；页内偏移量W = A%L
        - 比较页号P与页面长度M，若P≥M则产生越界中断
        - 页表中页号P对应的页表项地址 = 页表始址F + 页号P × 页表项长度，取出该页表项内容b，即物理块号
        - 计算 物理地址E = b × L + W
- 具有快表的地址变换机构
    - 高速缓冲存储器——快表（相联存储器TLB），主存中的页表常称为慢表
    - 基于局部性原理
- 两级页表
    - 顶级页表最多只能有一个页面
    - 10位一级页号 + 10位二级页号 + 12位页内偏移
- 基本分段存储管理方式
    - 分段
    - 段表
    - 地址变换机构
        - 逻辑地址A = 前面部分的段号S + 后面部分的段内偏移W
        - 段表中段号S对应的段表项地址 = 段表始址F + 段号S × 段表项长度
        - 去除段表项中该段的始址b，物理地址E = b + W
    - 段的共享和保护
- 段页式管理方式
    - 段号
    - 页号
    - 页内偏移量
    - 在一个进程中，段表只有一个，而页表可能有多个
    - 段页式管理的地址空间是二维的
### 习题  
- 1【2011】在虚拟内存管理中，地址变换机构将逻辑地址变换为物理地址，形成该逻辑地址的阶段是
A 编辑
B 编译
C 链接
D 装载→C
- 5【2009】分区分配内存管理方式的主要保护措施是
A 界地址保护
B 程序代码保护
C 数据保护
D 栈保护→A
- 6【2010】某基于动态分区存储管理的计算机，其主存容量为55MB（初始为空），采用最佳适配（Best Fit）算法，分配和释放的顺序为：分配15MB，分配30MB，释放15MB，分配8MB，分配6MB，此时主存中最大空闲分区的大小是→9MB
- 13 动态重定位是在作业的？中进行的
A 编译过程
B 装入过程
C 链接过程
D 执行过程→D
- 15 在可变分区管理中，采用拼接技术的目的是
A 合并空闲区
B 合并分配区
C 增加主存容量
D 便于地址转换?→A
- 18 多进程在主存中彼此互不干扰的环境下运行，操作系统是通过什么来实现的？
A 内存分配
B 内存保护
C 内存扩充
D 地址映射→B
- 29 操作系统实现什么存储管理的代价最小？
A 分区
B 分页
C 分段
D 段页式→A
- 31
- 32【2017】某计算机按字节编址，其动态分区内存管理采用最佳适应算法，每次分配和回收内存后都对空闲分区链重新排序。当前空闲分区信息如下表所示
分区始址 20K 500K 1000K 200K
分区大小 40KB 80KB 100KB 200KB
回收始址为60K、大小为140KB的分区后，系统中空闲分区的数量、空闲分区链第一个分区的始址和大小分别是→3，500K，80KB
- 38 对主存储器的访问，
A 以块（即页）或段为单位
B 以字节或字为单位
C 随存储器的管理方案不同而异
D 以用户的逻辑记录为单位→B
- 39 把作业空间中使用的逻辑地址变为内存中的物理地址称为
A 加载
B 重定位
C 物理化
D 逻辑化→B
- 45
- 46【2009】一个分段存储管理系统中，地址长度为32位，其中段号占8位，则最大段长是→2^24B
- 51【2010】某计算机采用二级页表的分页存储管理方式，按字节编址，页大小为2^10B，页表项大小为2B，逻辑地址结构为`页目录号|页号|页内偏移量
`逻辑地址空间大小为2^16页，则表示整个逻辑地址空间的页目录表中包含表项的个数至少是→128
- 52【2014】现有一个容量为10GB的磁盘分区，磁盘空间以簇为单位进行分配，簇的大小为4KB，若采用位图法管理该分区的空闲空间，即用一位标识一个簇是否被分配，则存放该位图所需的簇为→80
- 53【2014】
- 54【2016】
- 55【2019】
- 56【2019】
- 57【2019】在下列动态分区分配算法中，最容易产生内存碎片的是
A 首次适应算法
B 最坏适应算法
C 最佳适应算法
D 循环首次适应算法→C
- 综合题4【2013】
